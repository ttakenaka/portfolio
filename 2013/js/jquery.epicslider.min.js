// epicSlider - version 1.1 - jquery 1.7.1.
// Copyright - unlimitDesign
// Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
// Fuck it up and you're on your own in the dark wilderness of apeshit.

/*change log 13 sep 2012

	1.fixed so that captions appear when fx is net to 'none'

*/
(function(a){a.fn.epicSlider=function(b){function z(){D();f.addClass("current").show();p=f.attr("title");G();if(b.slideShow==true&&b.autoPlay==true){E();h=true}}function C(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)){b.fx=b.fxmobile;a(d).touchSwipe(c);function c(b){a.fn.epicSlider.killTimer();if(b=="left"){H("next")}else{H("prev")}}}}function D(){q=a(window).width();r=a(window).height();s=r/q;t=e.children().width();u=e.children().height();v=u/t;if(s>v){x=r;w=r/v}else{x=q*v;w=q}e.children("img").css({width:w+"px",height:x+"px",left:(q-w)/2+"px",top:(r-x)/2+"px"})}function E(){F();y=setInterval(function(){F();H("next")},b.slideShowInterval)}function F(){a("#progress").show().animate({width:"40px"},b.slideShowInterval,"easeInOutQuint",function(){a(this).css({width:"0"})})}function G(){if(f.attr("title")!=""){p=f.attr("title");if(b.fx!="none"){a(p).fadeIn()}else{a(p).show()}}}function H(c){if(f.is(":animated")||a(this).parent().hasClass("disabled"))return false;if(c=="next"){f=e.children("img.current");i=f.next("img");if(l.parent().hasClass("disabled"))l.parent().removeClass("disabled");if(e.find("img").length-2==f.index()&&b.loop==false){a("#progress").stop().fadeOut("fast");if(h==true)a.fn.epicSlider.killTimer();k.parent().addClass("disabled");m.parent().addClass("disabled")}if(i.length===0){if(b.loop==false){return false}else{a(p).fadeOut("fast");i=e.children("img:first-child")}}else{a(p).fadeOut("fast")}if(b.fx=="none"){f.removeClass("current").hide();i.addClass("current").show();f=e.children("img.current");G()}else if(b.fx=="fade"){f.removeClass("current").animate({opacity:0},b.transitionSpeed,b.easing,function(){a(this).hide()});i.addClass("current").css({opacity:0}).show().animate({opacity:1},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}else if(b.fx=="leftToRight"){f.css({zIndex:0}).removeClass("current").animate({left:-w+200},b.transitionSpeed,b.easing,function(){a(this).hide()});i.addClass("current").css({left:w,zIndex:1}).show().animate({left:(q-w)/2},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}else if(b.fx=="topToBottom"){f.css({zIndex:0}).removeClass("current").animate({top:r},b.transitionSpeed,b.easing,function(){a(this).hide()});i.addClass("current").css({top:-x,zIndex:1}).show().animate({top:(r-x)/2},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}}else{f=e.children("img.current");j=f.prev("img");if(k.parent().hasClass("disabled"))k.parent().removeClass("disabled");if(m.parent().hasClass("disabled"))m.parent().removeClass("disabled");if(f.index()==1&&b.loop==false){l.parent().addClass("disabled")}if(j.length===0){if(b.loop==false){l.parent().addClass("disabled");return false}else{a(p).fadeOut("fast");j=e.children("img:last-child")}}else{a(p).fadeOut("fast")}if(b.fx=="none"){f.removeClass("current").hide();j.addClass("current").show();f=e.children("img.current");G()}else if(b.fx=="fade"){f.removeClass("current").animate({opacity:0},b.transitionSpeed,b.easing,function(){a(this).hide()});j.addClass("current").css({opacity:0}).show().animate({opacity:1},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}else if(b.fx=="leftToRight"){f.css({zIndex:0}).removeClass("current").animate({left:w-200},b.transitionSpeed,b.easing,function(){a(this).hide()});j.addClass("current").css({left:-w,zIndex:1}).show().animate({left:(q-w)/2},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}else if(b.fx=="topToBottom"){f.css({zIndex:0}).removeClass("current").animate({top:-r},b.transitionSpeed,b.easing,function(){a(this).hide()});j.addClass("current").css({top:x,zIndex:1}).show().animate({top:(r-x)/2},b.transitionSpeed,b.easing,function(){f=e.children("img.current");G()})}}}var c={loop:true,slideShow:true,autoPlay:false,slideShowInterval:2500,transitionSpeed:750,startSlide:0,shuffleSlides:false,easing:"easeInOutQuint",fx:"leftToRight",fxmobile:"leftToRight",pattern:true};var b=a.extend({},c,b);var d=a(this),e=d.find("#slides"),f=e.find("img").eq(b.startSlide),g=e.find("img").length,h=false,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(b.slideShow==false){d.append('<div id="epic-navigation" class="allcontrols"><div class="nav-button"><div id="prev"></div></div><div class="nav-button"><div id="next"></div></div></div>')}else if(b.slideShow==true&&b.autoPlay==false){d.append('<div id="epic-navigation" class="allcontrols"><div class="nav-button"><div id="progress"></div><div id="play"></div></div><div class="nav-button"><div id="prev"></div></div><div class="nav-button"><div id="next"></div></div></div>')}else{d.append('<div id="epic-navigation" class="allcontrols"><div class="nav-button"><div id="progress"></div><div id="play" class="active"></div></div><div class="nav-button"><div id="prev"></div></div><div class="nav-button"><div id="next"></div></div></div>')}k=a("#next");l=a("#prev");m=a("#play");if(b.pattern==true)d.append(' <div id="epic-overlay"></div>');if(b.fx!="topToBottom"){a("#next").addClass("right");a("#prev").addClass("left")}else{a("#next").addClass("up");a("#prev").addClass("down")}if(b.loop==false){l.parent().addClass("disabled");l.attr("disabled","disabled")}if(b.shuffleSlides==true){var A=e.children("img");A.sort(function(){return Math.round(Math.random())-.5});e.children().remove();for(var B=0;B<A.length;B++)e.append(A[B]);f=e.find("img").eq(b.startSlide)}k.on("click",function(){if(h==true)a.fn.epicSlider.killTimer();H("next")});l.on("click",function(){if(h==true)a.fn.epicSlider.killTimer();H("prev")});m.on("click",function(){if(a(this).parent().hasClass("disabled"))return false;if(h==false){E();a(this).addClass("active");h=true}else{a.fn.epicSlider.killTimer();a(this).removeClass("active");h=false}});a(document).keydown(function(c){if(f.is(":animated"))return false;if(b.fx!="topToBottom"){switch(c.which){case 37:H("prev");a.fn.epicSlider.killTimer();break;case 39:H("next");a.fn.epicSlider.killTimer();break}}else{switch(c.which){case 38:H("next");a.fn.epicSlider.killTimer();break;case 40:H("prev");a.fn.epicSlider.killTimer();break}}});a(window).bind("resize",function(){D()});a.fn.epicSlider.killTimer=function(){clearInterval(y);a("#progress").stop().fadeOut("fast");a("div#play").removeClass("active");h=false};e.find("img").each(function(){var b=new Image;var c=a(this).attr("src");a(b).load(function(){g--;if(!g){d.css({background:"none"});C();z()}}).attr("src",c).error(function(){alert("check image path or connection")})})}})(jQuery)